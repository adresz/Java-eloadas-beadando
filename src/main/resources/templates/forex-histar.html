<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/header :: head('Forex - Historikus Árfolyamok')}"></head>

<body class="is-preload">

<div id="wrapper">

    <!-- Sidebar -->
    <th:block th:replace="~{fragments/nav :: sidebar}"></th:block>

    <!-- Main -->
    <div id="main">
        <div class="inner">

            <!-- Header -->
            <header id="header">
                <a href="#" class="logo"><strong>Forex</strong> Historikus Árfolyamok</a>
            </header>

            <!-- Content -->
            <section>
                <h1>Historikus Árfolyamok</h1>

                <!-- Form -->
                <div class="box">
                    <form method="get" th:action="@{/forex-histar}">
                        <label>Instrumentum:</label>
                        <select name="instrument" th:value="${selectedInstrument}">
                            <option th:each="i : ${instruments}"
                                    th:value="${i}"
                                    th:text="${i}"
                                    th:selected="${i == selectedInstrument}"></option>
                        </select>

                        <label>Időfelbontás:</label>
                        <select name="granularity" th:value="${selectedGranularity}">
                            <option th:each="g : ${gran}"
                                    th:value="${g.key}"
                                    th:text="${g.value}"
                                    th:selected="${g.key == selectedGranularity}"></option>
                        </select>

                        <button type="submit" class="primary">Lekérés</button>
                    </form>
                </div>

                <!-- Hibaüzenet -->
                <div th:if="${error}" style="margin-top: 20px;">
                    <p th:text="${error}" style="color:red;"></p>
                </div>

                <!-- Historikus adatok táblázat -->
                <table border="1" cellpadding="6" th:if="${candles}" style="margin-top: 20px; width:100%;">
                    <thead>
                    <tr>
                        <th>Idő</th>
                        <th>Nyitó</th>
                        <th>Záró</th>
                        <th>High</th>
                        <th>Low</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="c : ${candles}">
                        <td th:text="${c.time}"></td>
                        <td th:text="${c.mid.o}"></td>
                        <td th:text="${c.mid.c}"></td>
                        <td th:text="${c.mid.h}"></td>
                        <td th:text="${c.mid.l}"></td>
                    </tr>
                    </tbody>
                </table>

                <!-- Vissza gomb -->
                <div style="text-align:center; margin-top:30px;">
                    <a th:href="@{/}" class="button">Vissza a Dashboardra</a>
                </div>

            </section>

        </div>
    </div>

</div>

<!-- Scripts -->
<th:block th:replace="~{fragments/scripts :: scripts}"></th:block>

</body>
</html>
