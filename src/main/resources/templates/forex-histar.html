<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: head('Forex - Historikus Árfolyamok')}"></head>

<body class="is-preload">

<div id="wrapper">

    <!-- Sidebar -->
    <th:block th:replace="~{fragments/nav :: sidebar}"></th:block>

    <!-- Main -->
    <div id="main">
        <div class="inner">

            <!-- Header -->
            <header id="header">
                <a href="#" class="logo"><strong>Forex</strong> Historikus</a>
            </header>

            <!-- Content -->
            <section>
                <h1>Historikus Árfolyamok</h1>

                <!-- Űrlap -->
                <div class="box">
                    <form method="get" th:action="@{/forex-histar}">
                        <label>Instrumentum:</label>
                        <select name="instrument" class="select">
                            <option th:each="i : ${instruments}"
                                    th:value="${i}"
                                    th:text="${i}"
                                    th:selected="${i == selectedInstrument}"></option>
                        </select>

                        <label>Időfelbontás:</label>
                        <select name="granularity" class="select">
                            <option th:each="g : ${gran}"
                                    th:value="${g.key}"
                                    th:text="${g.value}"
                                    th:selected="${g.key == selectedGranularity}"></option>
                        </select>

                        <button type="submit" class="primary">Lekérés</button>
                    </form>
                </div>

                <!-- Hibaüzenet -->
                <div th:if="${error}" class="box" style="background:#ffebee; border-left:4px solid #e74c3c;">
                    <p style="color:#c0392b; margin:0;" th:text="${error}"></p>
                </div>

                <!-- Táblázat -->
                <div class="table-wrapper" th:if="${candles}">
                    <table>
                        <thead>
                        <tr>
                            <th>Idő</th>
                            <th>Nyitó</th>
                            <th>Záró</th>
                            <th>Magaspont</th>
                            <th>Alacsonypont</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="c : ${candles}">
                            <td th:text="${c.time}"></td>
                            <td th:text="${#numbers.formatDecimal(c.mid.o, 1, 5)}"></td>
                            <td th:text="${#numbers.formatDecimal(c.mid.c, 1, 5)}"></td>
                            <td th:text="${#numbers.formatDecimal(c.mid.h, 1, 5)}"></td>
                            <td th:text="${#numbers.formatDecimal(c.mid.l, 1, 5)}"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Vissza gomb -->
                <div style="text-align:center; margin-top:30px;">
                    <a th:href="@{/dashboard}" class="button">Vissza a Dashboardra</a>
                </div>
            </section>

        </div>
    </div>
</div>

<!-- Scripts -->
<th:block th:replace="~{fragments/scripts :: scripts}"></th:block>

</body>
</html>